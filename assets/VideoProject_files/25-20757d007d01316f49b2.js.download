(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{YTDI:function(e,t,n){"use strict";n.r(t);var r=n("kGFr"),o=n.n(r),a=n("5nKb"),c=n.n(a),i=n("S3kv"),l=n.n(i),s=(n("PSa+"),n("thK9"),n("mH1U")),u=n("1QO0"),d=n.n(u),m=n("9MLt"),g=n.n(m),f=n("pdLJ"),y=n("UN/X"),h=n("QUh1"),p=n("xz3g"),b=n("HyBP"),j=n("Zv2d");var k=n("UdBg");const w="recent-reactions",v="frequent-reactions",E=["100","tada","white_check_mark","x","eyes","sparkles","rocket","heavy_plus_sign","pray","fire","laughing","thinking_face","scream","wave","rainbow","heart","clap","ladybug"],O=E.map((e=>({name:e,suggested:!0}))),readRecentReactions=()=>Object(k.c)(w),S=/([^:]+)::skin-tone-\d/,getNeutralEmojiName=e=>{var t,n;return null!==(t=null===(n=e.match(S))||void 0===n?void 0:n[1])&&void 0!==t?t:e},getFrequentReactions=()=>{let e=(()=>Object(k.c)(v))();if(e.length>0)return e;const t=readRecentReactions().map(getNeutralEmojiName).reduce(((e,t)=>{var n;return e[t]=(null!==(n=e[t])&&void 0!==n?n:0)+1,e}),{}),n=Object.entries(t);return n.sort(((e,t)=>t[1]-e[1])),e=n.slice(0,18).map((e=>({name:e[0],suggested:!1}))),e=(e=>{const t=18-e.length;if(t>0){const n=e.map((e=>e.name)).reduce(((e,t)=>(e[t]=!0,e)),{}),r=O.filter((e=>!n[e.name]));e.push(...r.slice(0,t))}return e})(e),Object(k.d)(v,e),e};let C;var _=n("EERe"),T=n("GXyE");const A={category:-1,emoji:-1,categoryLength:0},L=n.n(T)()((e=>({mouseScrolled:!1,setMouseScrolled:t=>e({mouseScrolled:t}),currentSelection:A,setCurrentSelection:t=>e({currentSelection:t})})));var R;const B=g.a.div(R||(R=l()(["\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n"])));function ArrowKeyNavigation(e){let{children:t,groupedEmojis:n,filterValue:r,isOpen:o,onClick:a}=e;const c=d.a.useRef(null),{onKeyDown:i,onWheel:l}=function useArrowKeyNavigation(e){let{groupedEmojis:t,filterValue:n,isOpen:r,onClick:o,pickerRef:a}=e;const{getEmojiNameWithSkinTone:c}=Object(j.a)(),{currentSelection:i,setCurrentSelection:l,mouseScrolled:s,setMouseScrolled:u}=L(),m=L.getState(),[g,f]=d.a.useState(!1),h=9,p="var(--lns-color-blurpleMedium)",b=d.a.useCallback((()=>{l(A)}),[l]),k=Object(y.e)((e=>{if(!a.current)return;const n=e;if(!["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Enter"].includes(n.key))return;n.preventDefault(),n.stopPropagation();const r=t.length;if(!r)return;if("ArrowDown"!==n.key&&("Tab"!==n.key||n.shiftKey)&&ifSamePos(i.category,i.emoji,-1,-1))return;if(s){l({category:0,emoji:0,categoryLength:t[0].emojis.length});return a.current.querySelector('[data-name="emoji-grid"]').scrollTop=0,void u(!1)}let c=null;if("ArrowDown"===n.key){if(i.category===r-1&&i.emoji+h>=i.categoryLength)return;c=ifSamePos(i.category,i.emoji,-1,-1)?[0,0]:i.emoji+h>=i.categoryLength?[i.category+1,0]:[i.category,i.emoji+h]}else if("ArrowUp"===n.key){if(0===i.category&&i.emoji-h<0)return;if(i.emoji-h<0){const e=i.category-1;c=[e,t[e].emojis.length-1]}else c=[i.category,i.emoji-h]}else if("ArrowLeft"===n.key||"Tab"===n.key&&n.shiftKey){if(ifSamePos(i.category,i.emoji,0,0))return;if(0===i.emoji){const e=i.category-1;c=[e,t[e].emojis.length-1]}else c=[i.category,i.emoji-1]}else if("ArrowRight"===n.key||"Tab"===n.key&&!n.shiftKey){if(ifSamePos(i.category,i.emoji,r-1,t[r-1].emojis.length-1))return;c=i.emoji===i.categoryLength-1?[i.category+1,0]:[i.category,i.emoji+1]}else if("Enter"===n.key){if(-1===i.category&&-1===i.emoji)return;const{name:e,category:t}=getEmojiOnPos();o(e,t)}c&&l({category:c[0],emoji:c[1],categoryLength:t[c[0]].emojis.length})}),50),w=d.a.useCallback((()=>{if(!a.current)return{name:null,emoji:null};const e=a.current.querySelectorAll('[data-name="category-name"]')[i.category],t=a.current.querySelectorAll('[data-name="category-container"]')[i.category];return{name:e,emoji:null==t?void 0:t.querySelectorAll('[data-name="emoji"]')[i.emoji]}}),[i.category,i.emoji,a]),v=d.a.useCallback((()=>{if(!a.current)return;const e=a.current.getElementsByClassName("selected-emoji")[0];e&&(e.style.backgroundColor="",e.classList.remove("selected-emoji"));const{emoji:t}=w();t&&(t.style.backgroundColor=p,t.classList.add("selected-emoji"))}),[w,a]),E=d.a.useCallback((()=>{if(!a.current)return;const{name:e,emoji:t}=w(),n=a.current.querySelector('[data-name="emoji-grid"]');if(n&&e&&t){const r=e.getBoundingClientRect().bottom-t.getBoundingClientRect().top,o=n.getBoundingClientRect().top-t.getBoundingClientRect().top,a=t.getBoundingClientRect().bottom-n.getBoundingClientRect().bottom;r>0?n.scrollTop-=r+t.offsetHeight:o>0?n.scrollTop-=o:a>0&&(n.scrollTop+=a+1)}}),[w,a]);d.a.useEffect((()=>{v()}),[v,i]),d.a.useEffect((()=>{if(r&&a.current){v(),L.setState(m);a.current.querySelector('[data-name="emoji-grid"]').scrollTop=0,f(!0)}}),[]),d.a.useEffect((()=>{g&&E()}),[E,g]),d.a.useEffect((()=>{if(t.length&&n&&a.current){l({category:0,emoji:0,categoryLength:t[0].emojis.length});a.current.querySelector('[data-name="emoji-grid"]').scrollTop=0}else b()}),[n,t,a,b,l]);const getEmojiOnPos=()=>{const e=t[i.category].emojis[i.emoji].short_name;return{name:c(e.toLowerCase()),category:t[i.category].category}};return{onKeyDown:k,onWheel:()=>{u(!0)}}}({groupedEmojis:n,filterValue:r,isOpen:o,onClick:a,pickerRef:c});return d.a.createElement(B,{"data-name":"Arrow key wrapper",onKeyDown:i,onWheel:l,ref:c},t)}const ifSamePos=(e,t,n,r)=>e===n&&t===r;const x=["emojiLabel","emojiUnicode","needsBorder","dataName","buttonRef"];var D,K,U;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const N=Object(s.vd)(4),P=Object(s.vd)(.25),q=Object(s.vd)(4),I=Object(s.vd)(2.75),M=Object(s.vd)(1),z=Object(s.vd)(10),F="medium",W=g.a.button(D||(D=l()(["\n  height: ",";\n  width: ",";\n  background-color: transparent;\n  cursor: pointer;\n  border: none;\n  outline: none;\n  border-radius: var(--lns-radius-medium);\n\n  &:hover {\n    background-color: var(--lns-color-blurpleMedium);\n  }\n\n  &:focus-within {\n    background-color: var(--lns-color-primary);\n    box-shadow: 0 0 0 2px var(--lns-color-focusRing);\n  }\n\n  ","\n"])),q,q,(e=>e.needsBorder&&"border: 1px solid var(--lns-color-border);")),V=g.a.div(K||(K=l()(["\n  overflow: auto;\n  overflow-x: hidden;\n\n  // Firefox\n  scrollbar-width: thin;\n\n  // Chrome, Safari, Opera\n  &::-webkit-scrollbar {\n    width: ",";\n  }\n\n  &::-webkit-scrollbar-track {\n    background-color: transparent;\n  }\n\n  &::-webkit-scrollbar-button {\n    width: 0;\n    height: 0;\n    display: none;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    min-height: ",";\n    border-radius: var(--lns-radius-medium);\n    &:hover {\n      background-color: var(--lns-color-grey5) !important;\n    }\n  }\n\n  &:hover {\n    &::-webkit-scrollbar-thumb {\n      background-color: var(--lns-color-backgroundActive);\n    }\n  }\n"])),M,z),EmojiButton=e=>{let{emojiLabel:t,emojiUnicode:n,needsBorder:r,dataName:a,buttonRef:i}=e,l=c()(e,x);return d.a.createElement(W,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({needsBorder:r,ref:i,"data-name":a,role:"button"},l),d.a.createElement(p.a,{size:I,"aria-label":t},n))},SkinToneSelector=e=>{let{videoId:t,searchBarRef:n}=e;const r=Object(f.M)(t||""),{skinTone:o,setSkinTone:a}=Object(_.a)(),[c,i,l]=Object(f.Q)(),{getEmojiUnicodeByName:m}=Object(h.a)(),g=o||b.g[0].short_name,p=b.g.findIndex((e=>e.short_name===g)),[j,w]=Object(u.useState)(p),onClose=()=>{i(!1)},handleSkinToneClick=e=>{w(b.g.findIndex((t=>t.short_name===e.short_name))),(e=>{Object(k.d)("skinTone",e),a(e),null==r||r.skinToneSelected(e)})(e.short_name),Object(f.w)("Skin_Tone_Selected",{video_id:t,skinTone:e.short_name}),onClose()},v=Object(y.e)((e=>{const t=e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Enter"].includes(t.key))if(t.preventDefault(),t.stopPropagation(),"ArrowRight"===t.key||"Tab"===t.key&&!t.shiftKey){if(j===b.g.length-1)return void w(0);w(j+1)}else if("ArrowLeft"===t.key||"Tab"===t.key&&t.shiftKey){if(0===j)return void w(b.g.length-1);w(j-1)}else"Enter"===t.key&&handleSkinToneClick(b.g[j])}),50);return d.a.useEffect((()=>{var e;c||(null===(e=n.current)||void 0===e||e.focus())}),[c,n]),d.a.useEffect((()=>{if(c&&l.current){const e=l.current.querySelector('[data-name="skinTones"]'),t=null==e?void 0:e.children[j];t&&t.focus()}}),[j,c,l]),d.a.createElement("div",{ref:l},d.a.createElement(s.h,{position:"relative",onKeyDown:e=>{"Escape"===e.key&&c&&(e.stopPropagation(),onClose())}},d.a.createElement(EmojiButton,{needsBorder:!0,dataName:"skinToneSelectorBtn",onClick:()=>{i(!c)},emojiUnicode:m(g)}),c&&d.a.createElement(s.h,{position:"absolute",top:"100%",backgroundColor:"overlay",radius:"medium",shadow:"medium",padding:"xsmall",right:0,zIndex:2,borderSide:"all",onKeyDown:v},d.a.createElement(s.b,{gap:P,"data-name":"skinTones"},b.g.map((e=>d.a.createElement(EmojiButton,{dataName:e.label,key:e.label,emojiLabel:e.label,emojiUnicode:m(e.short_name),onClick:()=>handleSkinToneClick(e)})))))))},X=g.a.div(U||(U=l()(["\n  @media only screen and (max-width: 430px) {\n    input {\n      font-size: var(--lns-fontSize-large);\n    }\n  }\n"]))),SearchBar=e=>{let{value:t,onChange:n,shouldFocus:r,searchBarRef:o,videoId:a}=e;const{setCurrentSelection:c}=L();d.a.useEffect((()=>{o.current&&r&&o.current.focus()}),[r,o]);return d.a.createElement(X,null,d.a.createElement(s.kd,{"data-name":"searchBar",ref:o,placeholder:"Search",icon:d.a.createElement(s.zc,null),value:t,onChange:n,onKeyUp:e=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab"].includes(e.key)&&(e.preventDefault(),e.stopPropagation())},onClick:()=>{c(A),Object(f.w)("Extended_Reaction_Search_Clicked",{video_id:a})}}))},GroupedEmojiList=e=>{let{onClick:t,category:n}=e;const{getEmojiByName:r}=Object(j.a)(),{getEmojiNameWithSkinTone:o}=Object(j.a)();return n.emojis.length>0?d.a.createElement(s.h,{paddingBottom:"small","data-name":"category-container"},d.a.createElement(s.h,{position:"sticky",top:-1,backgroundColor:"overlay",paddingY:"small",paddingLeft:F,"data-name":"category-name"},d.a.createElement(s.id,{color:"bodyDimmed",fontWeight:"medium",size:"small"},n.category)),d.a.createElement(s.h,{paddingTop:"xsmall",paddingX:F,"data-name":"category-list"},d.a.createElement(s.b,{columns:"repeat(auto-fill, minmax(".concat(N,", 1fr))"),gap:P},n.emojis.map((e=>d.a.createElement(EmojiButton,{dataName:"emoji",key:e.unified,emojiLabel:e.short_name,emojiUnicode:r(e.short_name),onClick:()=>{const r=o(e.short_name.toLowerCase());t&&t(r,n.category)},title:e.short_name})))))):null},EmptySearchResults=e=>{let{isEmpty:t}=e;return t?d.a.createElement(s.h,{marginTop:"25%"},d.a.createElement(s.id,{color:"bodyDimmed",fontWeight:"medium",size:"small",alignment:"center"},"No emojis matched your search")):null},PickerLayout=e=>{let{children:t}=e;return d.a.createElement(s.h,{borderSide:"all",radius:"medium",shadow:"large",height:"100%"},t)};t.default=e=>{let{onClick:t,videoId:n,placeUsed:r,isOpen:o=!0}=e;const[a,c]=Object(u.useState)(""),{groupedEmojis:i}=Object(h.a)(),l=(()=>{const[e,t]=d.a.useState(!0);if(e){t(!1);const e=getFrequentReactions().map((e=>e.name));C=Object(b.e)("Frequently Used",e)}return C})(),m=d.a.useRef(null),g=d.a.useCallback(Object(y.c)((e=>{Object(f.w)("Extended_Reaction_Searched",{video_id:n,searchText:e,placeUsed:r})}),1e3),[]),p=Object(u.useMemo)((()=>[l,...i].map((e=>function groupEmojisFiltered(e){let{group:t,filterValue:n}=e;if(!n)return t;const r=t.emojis.filter((e=>{let t=!1;const r=n.toLowerCase();return e.short_names.forEach((e=>{if(!t)return t=e.toLowerCase().includes(r),t})),t||e.name.toLowerCase().includes(r)}));return{category:t.category,emojis:r}}({group:e,filterValue:a}))).filter((e=>e.emojis.length>0))),[l,i,a]),j=0===p.flatMap((e=>e.emojis)).flatMap((e=>e.short_names)).length;d.a.useEffect((()=>{o&&c("")}),[o]);const onEmojiClicked=(e,r)=>{if("Frequently Used"===r){const t=!!E.includes(e);Object(f.w)("Frequent_extended_reaction_clicked",{video_id:n,selected_emoji:e,is_suggested:t})}(e=>{const t=readRecentReactions();t.unshift(e),t.splice(100,t.length-100),Object(k.d)(w,t),Object(k.a)(v)})(e),null==t||t(e)};return o?d.a.createElement(PickerLayout,null,d.a.createElement(ArrowKeyNavigation,{filterValue:a,groupedEmojis:p,isOpen:o,onClick:onEmojiClicked},d.a.createElement(s.h,{paddingX:F,paddingTop:F,paddingBottom:"small"},d.a.createElement(s.b,{columns:["1fr","auto"],gap:"small"},d.a.createElement(SearchBar,{value:a,onChange:e=>{const t=e.target.value;c(t),g(t)},shouldFocus:o,searchBarRef:m,videoId:n}),d.a.createElement(SkinToneSelector,{videoId:n,searchBarRef:m}))),d.a.createElement(V,{"data-name":"emoji-grid"},d.a.createElement(EmptySearchResults,{isEmpty:j}),p.map((e=>d.a.createElement(GroupedEmojiList,{key:e.category,onClick:onEmojiClicked,category:e})))))):d.a.createElement(PickerLayout,null)}}}]);
//# sourceMappingURL=25-f746c970f0aa6ea1de35fcd8ba3c3131.js.map