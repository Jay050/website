(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{"Ja+x":function(e,t,c){"use strict";c.r(t);var n=c("dej6"),r=c.n(n),o=(c("PSa+"),c("9EQE")),a=c("AGlj"),u=c("ifeH"),l=c("Adie"),s=c("mH1U"),i=c("1QO0"),d=c.n(i),m=c("DvbY"),b=c("f+9H"),f=c("lhHP"),j=c("8aGn"),O=c("tAhi"),p=c("mL7/"),g=c("MtD4"),h=c("LWK2"),E=c("Ot3Z"),y=c("CtBj"),S=c("6n2i"),k=c("lAFq"),v=c("+svy");const TextIconButton=e=>{const{compact:t,textButtonSize:c="medium",buttonText:n}=e;return t?d.a.createElement(s.n,{icon:d.a.createElement(s.Uc,null)}):d.a.createElement("div",{className:"px:xsmall"},d.a.createElement(s.jd,{icon:d.a.createElement(s.Uc,null),size:c},n))};t.default=function RecordAReplyButton(e){const{iconButton:t,compact:c,addReplyId:n=null,textButtonSize:I,buttonText:L="Record a reply",source:_}=e,[w,x]=Object(i.useState)(null),[B,R]=Object(i.useState)({}),A=Object(m.useSelector)(h.u),C=Object(m.useSelector)(E.j),U=Object(m.useSelector)(g.c),z=Object(v.a)();Object(i.useEffect)((()=>{let e=!1;function _fetchLoom(){return(_fetchLoom=r()((function*(){const t=yield Object(k.a)().waitOnInstance();w||e||x(t)}))).apply(this,arguments)}return function fetchLoom(){return _fetchLoom.apply(this,arguments)}(),()=>{e=!0}}),[w]),Object(i.useEffect)((()=>{R({source:_,parentCommentId:n,videoId:A})}),[n,_,A]);const H=Object(m.useDispatch)(),D=Object(i.useRef)(null),J=Object(m.useSelector)(p.a),{video_player:{full_screen:M,isMainVideoOnSharePage:N}}=Object(m.useSelector)((e=>e));let P;switch(Object(i.useLayoutEffect)((()=>{null!=D&&D.current&&w&&w.configureButton({element:D.current,hooks:{onInsertClicked:e=>{H(C&&U?Object(O.a)({comment:e.sharedUrl,addReplyId:n,anonUserName:z,creationMethod:o.d}):Object(f.b)(u.B,{videoId:e.id,comment:e.sharedUrl,addReplyId:n})),y.track(a.of,B),Object(S.a)("recorder.insert_recording",{source:B.source,isLoggedIn:C}),n&&H(Object(b.b)(null))},onAnalyticsEvent:()=>{},onStart:()=>{y.track(a.rf,B),Object(S.a)("recorder.start_recording",{source:B.source,isLoggedIn:C})},onCancel:()=>{y.track(a.pf,B),Object(S.a)("recorder.cancel_recording",{source:B.source,isLoggedIn:C})},onComplete:()=>{y.track(a.qf,B),Object(S.a)("recorder.recording_complete",{source:B.source,isLoggedIn:C})}}})}),[w,H,J,n,B,C,U,z]),_){case l.b:P="record-reply-engagement-bar";break;case l.a:P="record-reply-comment-bar";break;default:P="record-reply-end-screen"}return d.a.createElement("div",{"data-testid":P,onClick:()=>{M&&H(Object(j.e)()),N&&H(Object(j.g)()),y.track(a.Wf,B),Object(S.a)("button.click",{context:a.Wf,source:B.source,isLoggedIn:C})}},d.a.createElement("div",{ref:D},t?d.a.createElement(TextIconButton,{compact:c,textButtonSize:I,buttonText:L}):d.a.createElement("div",{className:"bgc:white radius:medium theme-light"},d.a.createElement(s.e,{variant:"neutral",icon:d.a.createElement(s.sc,{color:"#ff623e"})},L))))}},"mL7/":function(e,t,c){"use strict";c.d(t,"c",(function(){return r})),c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return a}));var n=c("Vc3w");const selectComments=e=>e.comments,r=Object(n.createSelector)(selectComments,(e=>{let{comments:t}=e;return t})),o=Object(n.createSelector)(selectComments,(e=>e.comment_buckets)),a=Object(n.createSelector)(selectComments,(e=>e.comment_reply_count))}}]);
//# sourceMappingURL=165-a264ec8a911bf63c076ed41f2e757aa2.js.map